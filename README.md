# DW WhatsApp para WooCommerce

Plugin WordPress profissional para integraÃ§Ã£o completa do WhatsApp com WooCommerce. Adiciona botÃµes de WhatsApp em produtos e botÃ£o flutuante em todas as pÃ¡ginas. **Funciona perfeitamente com ou sem WooCommerce instalado!**

[![WordPress](https://img.shields.io/badge/WordPress-5.0+-blue.svg)](https://wordpress.org/)
[![PHP](https://img.shields.io/badge/PHP-7.4+-green.svg)](https://php.net/)
[![WooCommerce](https://img.shields.io/badge/WooCommerce-Optional-orange.svg)](https://woocommerce.com/)
[![License](https://img.shields.io/badge/License-GPL%20v2+-red.svg)](https://www.gnu.org/licenses/gpl-2.0.html)

## ğŸš€ Funcionalidades Principais

### âœ¨ **BotÃ£o Flutuante AvanÃ§ado**
- **4 posiÃ§Ãµes**: Inferior Direito, Inferior Esquerdo, Superior Direito, Superior Esquerdo
- **Ajuste fino**: Offset horizontal e vertical (-100px a +100px)
- **3 tamanhos**: Pequeno, MÃ©dio, Grande
- **2 estilos**: Retangular com texto ou Circular com hover
- **Tooltip inteligente**: Posicionamento automÃ¡tico baseado na posiÃ§Ã£o
- **Design responsivo**: AdaptaÃ§Ã£o automÃ¡tica para mobile

### ğŸ­ **Dois Estilos de BotÃ£o**
- **Estilo Retangular**: BotÃ£o com texto dentro (padrÃ£o)
- **Estilo Circular**: Ãcone circular com texto no hover
- **TransiÃ§Ãµes suaves**: AnimaÃ§Ãµes CSS profissionais
- **Hover interativo**: Tooltip aparece ao passar o mouse

### â° **Sistema de HorÃ¡rios Diferenciados**
- **HorÃ¡rios por dia da semana**: Configure horÃ¡rios diferentes para cada dia
- **Exemplos prÃ¡ticos**: Segunda a Sexta 08:00-17:00, SÃ¡bado 08:00-12:00
- **Status automÃ¡tico**: Online/Offline baseado nos horÃ¡rios configurados
- **Fusos horÃ¡rios brasileiros**: Suporte completo aos fusos do Brasil
- **FormataÃ§Ã£o inteligente**: Agrupa dias com horÃ¡rios iguais

### ğŸ‘¥ **Sistema de MÃºltiplos UsuÃ¡rios**
- **AtÃ© 10 usuÃ¡rios**: Configure mÃºltiplos atendentes
- **Status individual**: Cada usuÃ¡rio pode ter status diferente
- **Avatars personalizados**: Upload de fotos para cada usuÃ¡rio
- **HorÃ¡rios individuais**: Cada usuÃ¡rio pode ter horÃ¡rios diferentes
- **Mensagens personalizadas**: Texto especÃ­fico para cada usuÃ¡rio
- **Widget de chat**: Interface moderna para escolher o atendente

### ğŸ›’ **IntegraÃ§Ã£o Completa com WooCommerce**
- **BotÃµes em pÃ¡ginas de produto**: IntegraÃ§Ã£o nativa com WooCommerce
- **BotÃµes em listagem de produtos**: Aparece na loja e categorias
- **IntegraÃ§Ã£o com variaÃ§Ãµes**: Suporte completo a produtos variÃ¡veis
- **Seletor de quantidade no loop**: Suporte nativo para seletores de quantidade no catÃ¡logo
- **Compatibilidade Woodmart**: IntegraÃ§Ã£o completa com o tema Woodmart
- **Links de produtos**: Inclui link do produto nas mensagens
- **Controle de produtos sem preÃ§o**: BotÃ£o especial para produtos sem preÃ§o
- **Compatibilidade HPOS**: Suporte ao High-Performance Order Storage

### ğŸ“‹ **Sistema de Captura de Leads**
- **Captura de dados antes do WhatsApp**: Modal elegante para capturar nome, e-mail e telefone
- **Campos configurÃ¡veis**: Escolha quais campos exibir e quais sÃ£o obrigatÃ³rios
- **Campos customizados**: Crie campos personalizados (texto, e-mail, telefone, data, nÃºmero, senha, seleÃ§Ã£o)
- **MÃ¡scara de telefone brasileiro**: FormataÃ§Ã£o automÃ¡tica (99) 99999-9999
- **ValidaÃ§Ã£o em tempo real**: ValidaÃ§Ã£o de campos obrigatÃ³rios e formato de e-mail
- **Design moderno**: Modal com gradiente verde WhatsApp e animaÃ§Ãµes suaves
- **Cache busting**: CSS versionado automaticamente para evitar problemas de cache
- **IntegraÃ§Ã£o Google Tag Manager**: Envio automÃ¡tico de dados para dataLayer do GTM

### ğŸ“Š **Gerenciamento de Leads**
- **Base de dados dedicada**: Tabela customizada para armazenar todos os leads
- **DetecÃ§Ã£o de clientes WooCommerce**: Identifica automaticamente se o lead Ã© cliente
- **Agrupamento inteligente**: Contatos duplicados sÃ£o agrupados com contador de contatos
- **HistÃ³rico completo**: Primeiro e Ãºltimo contato registrados
- **VisualizaÃ§Ã£o detalhada**: Modal popup para ver todos os dados do lead incluindo campos customizados
- **ExportaÃ§Ã£o completa**: Exporte leads em CSV ou Excel incluindo campos customizados
- **Busca avanÃ§ada**: Busque leads por nome, e-mail ou telefone
- **PaginaÃ§Ã£o**: NavegaÃ§Ã£o fÃ¡cil atravÃ©s de grandes volumes de leads
- **Tabela responsiva**: Layout adaptÃ¡vel com redimensionamento de colunas por arraste

### ğŸ¨ **Interface e Design**
- **Design responsivo**: Funciona perfeitamente em mobile
- **Ãcone SVG do WhatsApp**: Ãcone vetorial de alta qualidade
- **AnimaÃ§Ãµes suaves**: TransiÃ§Ãµes e efeitos hover
- **Cores personalizÃ¡veis**: Escolha a cor dos botÃµes
- **Mensagens personalizÃ¡veis**: Configure textos para cada situaÃ§Ã£o

## ğŸ“¦ InstalaÃ§Ã£o

### MÃ©todo 1: Upload via WordPress Admin
1. FaÃ§a upload do arquivo `dw-whatsapp.zip` atravÃ©s do painel administrativo do WordPress
2. Ative o plugin
3. Configure o nÃºmero do WhatsApp nas configuraÃ§Ãµes
4. Personalize as mensagens e aparÃªncia

### MÃ©todo 2: Upload via FTP
1. Extraia o arquivo `dw-whatsapp.zip`
2. FaÃ§a upload da pasta `dw-whatsapp` para `/wp-content/plugins/`
3. Ative o plugin atravÃ©s do painel administrativo

## âš™ï¸ ConfiguraÃ§Ã£o

### ğŸ”§ ConfiguraÃ§Ãµes BÃ¡sicas
- **NÃºmero do WhatsApp**: Digite com cÃ³digo do paÃ­s e DDD (ex: 5519999999999)
- **Cor dos BotÃµes**: Escolha a cor dos botÃµes
- **PosiÃ§Ã£o do BotÃ£o Flutuante**: 4 posiÃ§Ãµes disponÃ­veis

### ğŸ¨ ConfiguraÃ§Ãµes AvanÃ§adas do BotÃ£o
- **Estilo do BotÃ£o**: Retangular com texto ou Circular com hover
- **PosiÃ§Ã£o Horizontal**: Ajuste fino (-100px a +100px)
- **PosiÃ§Ã£o Vertical**: Ajuste fino (-100px a +100px)
- **Tamanho do BotÃ£o**: Pequeno, MÃ©dio ou Grande

### ğŸ’¬ Mensagens PersonalizÃ¡veis
- **Mensagem para Produtos com PreÃ§o**: Use `{product_name}` para inserir o nome do produto
- **Mensagem para Produtos sem PreÃ§o**: Mensagem para solicitaÃ§Ã£o de orÃ§amento
- **Mensagem do BotÃ£o Flutuante**: Mensagem padrÃ£o para contato geral
- **Textos dos BotÃµes**: Personalize os textos dos botÃµes

### ğŸ“‹ Captura de Dados de Contato
- **Habilitar captura**: Ative ou desative a captura de dados antes de enviar para WhatsApp
- **Campos a exibir**: Escolha quais campos mostrar (Nome, E-mail, Telefone)
- **Campos obrigatÃ³rios**: Defina quais campos sÃ£o obrigatÃ³rios
- **TÃ­tulo e subtÃ­tulo**: Personalize os textos do modal de captura
- **MÃ¡scara automÃ¡tica**: Telefone formatado automaticamente no padrÃ£o brasileiro

### ğŸ¨ **Campos Customizados**
- **Crie campos personalizados**: Adicione quantos campos quiser ao formulÃ¡rio
- **Tipos de campo**: Texto curto, texto longo, e-mail, telefone, data, nÃºmero, senha, seleÃ§Ã£o
- **Campos obrigatÃ³rios**: Defina quais campos sÃ£o obrigatÃ³rios
- **Exibir no WhatsApp**: Escolha se o campo aparece na mensagem do WhatsApp ou sÃ³ no banco
- **OpÃ§Ãµes de seleÃ§Ã£o**: Configure opÃ§Ãµes para campos do tipo seleÃ§Ã£o
- **Ordem personalizada**: Defina a ordem de exibiÃ§Ã£o dos campos
- **Gerenciamento completo**: Interface admin para criar, editar e excluir campos

### ğŸ‘¥ Sistema de MÃºltiplos UsuÃ¡rios
- **Ative o sistema**: Marque "Habilitar mÃºltiplos usuÃ¡rios"
- **Configure usuÃ¡rios**: Nome, telefone, departamento e avatar
- **HorÃ¡rios individuais**: Configure horÃ¡rios diferentes para cada dia da semana
- **Status automÃ¡tico**: Online/Offline baseado nos horÃ¡rios
- **Fusos horÃ¡rios**: Escolha o fuso horÃ¡rio de cada usuÃ¡rio

## ğŸ¨ PersonalizaÃ§Ã£o AvanÃ§ada

### ğŸ“ Posicionamento do BotÃ£o
- **Inferior Direito**: PadrÃ£o, ideal para a maioria dos sites
- **Inferior Esquerdo**: Alternativa para layouts especÃ­ficos
- **Superior Direito**: Para sites com muito conteÃºdo inferior
- **Superior Esquerdo**: Para layouts nÃ£o convencionais
- **Ajuste fino**: Offset horizontal e vertical para posicionamento perfeito

### ğŸ­ Estilos de BotÃ£o
- **Retangular**: BotÃ£o com texto dentro, ideal para desktop
- **Circular**: Ãcone circular com tooltip, ideal para designs minimalistas
- **Tooltip inteligente**: Aparece automaticamente no lado correto

### ğŸ“± Responsividade
- **Mobile-first**: Design otimizado para dispositivos mÃ³veis
- **AdaptaÃ§Ã£o automÃ¡tica**: BotÃ£o se adapta ao tamanho da tela
- **Tooltip desabilitado em mobile**: Melhor experiÃªncia em touch
- **Posicionamento otimizado**: PosiÃ§Ãµes ajustadas para mobile

## ğŸ”§ Compatibilidade

- **WordPress**: 5.0 ou superior
- **PHP**: 7.4 ou superior
- **WooCommerce**: Opcional (funciona perfeitamente sem)
- **Testado atÃ©**: WordPress 6.8
- **Temas compatÃ­veis**: Woodmart e outros temas WooCommerce
- **Navegadores**: Chrome, Firefox, Safari, Edge

## ğŸ“± Funcionalidades Mobile

- **BotÃ£o flutuante otimizado**: Para touch e gestos
- **Texto oculto em telas pequenas**: Interface limpa
- **Ãcone do WhatsApp sempre visÃ­vel**: Reconhecimento imediato
- **Abertura direta no aplicativo**: WhatsApp nativo
- **Posicionamento inteligente**: Evita conflitos com outros elementos

## ğŸŒ InternacionalizaÃ§Ã£o

- **Texto em portuguÃªs brasileiro**: Interface completamente em portuguÃªs
- **Suporte a mÃºltiplos idiomas**: Estrutura preparada para traduÃ§Ã£o
- **Fusos horÃ¡rios brasileiros**: Todos os fusos do Brasil configurados
- **FormataÃ§Ã£o brasileira**: HorÃ¡rios e datas no formato brasileiro

## ğŸ”’ SeguranÃ§a

- **VerificaÃ§Ã£o de acesso direto**: ProteÃ§Ã£o contra acesso nÃ£o autorizado
- **SanitizaÃ§Ã£o completa**: Todos os inputs sÃ£o sanitizados
- **ValidaÃ§Ã£o de dados**: ValidaÃ§Ã£o rigorosa de todos os dados
- **Nonce para formulÃ¡rios**: ProteÃ§Ã£o contra CSRF
- **Escape de output**: ProteÃ§Ã£o contra XSS

## ğŸ“ Suporte e Desenvolvimento

- **Desenvolvedor**: David William da Costa
- **Website**: https://dwdigital.com.br
- **GitHub**: https://github.com/agenciadw/dw-whatsapp
- **Email**: david@dwdigital.com.br

### ğŸ”— **IntegraÃ§Ã£o Google Tag Manager**
- **Evento automÃ¡tico**: Envio de evento `whatsapp_lead_capture` para dataLayer
- **Dados completos**: Nome, e-mail, telefone e todos os campos customizados
- **Estrutura organizada**: Dados agrupados em `lead_data` e `custom_fields`
- **Timestamp automÃ¡tico**: Data/hora de captura incluÃ­da automaticamente
- **VersÃ£o do widget**: IdentificaÃ§Ã£o da versÃ£o do plugin nos dados

## ğŸ“„ LicenÃ§a

GPL v2 ou posterior - https://www.gnu.org/licenses/gpl-2.0.html

## ğŸ”„ Changelog

### VersÃ£o 2.0.1 - 18-11-2025
- ğŸ¨ **Sistema de Campos Customizados**: Crie campos personalizados no formulÃ¡rio de captura
- ğŸ“‹ **Tipos de campo**: Texto curto, texto longo, e-mail, telefone, data, nÃºmero, senha, seleÃ§Ã£o
- âš™ï¸ **ConfiguraÃ§Ãµes avanÃ§adas**: Defina se o campo Ã© obrigatÃ³rio e se aparece no WhatsApp
- ğŸ”— **IntegraÃ§Ã£o Google Tag Manager**: Envio automÃ¡tico de dados para dataLayer do GTM
- ğŸ‘ï¸ **VisualizaÃ§Ã£o de Leads**: Modal popup para ver todos os dados do lead
- ğŸ“Š **ExportaÃ§Ã£o melhorada**: Campos customizados incluÃ­dos na exportaÃ§Ã£o CSV/Excel
- ğŸ“± **Tabela responsiva**: Layout adaptÃ¡vel com redimensionamento de colunas por arraste
- ğŸ¯ **Melhorias na interface**: BotÃ£o "Ver Lead" e melhor organizaÃ§Ã£o dos dados

### VersÃ£o 2.0.0 - 13-11-2025
- ğŸ‰ **LanÃ§amento da versÃ£o 2.0** com sistema completo de captura e gerenciamento de leads
- ğŸ“‹ **Sistema de Captura de Dados**: Modal elegante para capturar nome, e-mail e telefone antes de enviar para WhatsApp
- ğŸ¨ **Design do Modal**: Interface moderna com gradiente verde WhatsApp, animaÃ§Ãµes suaves e botÃ£o de fechar posicionado
- âœ… **ValidaÃ§Ã£o em Tempo Real**: ValidaÃ§Ã£o de campos obrigatÃ³rios e formato de e-mail antes de enviar
- ğŸ“± **MÃ¡scara de Telefone Brasileiro**: FormataÃ§Ã£o automÃ¡tica (99) 99999-9999 para celular e (99) 9999-9999 para fixo
- ğŸ’¾ **Base de Dados de Leads**: Tabela customizada para armazenar todos os leads capturados
- ğŸ” **DetecÃ§Ã£o de Clientes WooCommerce**: Identifica automaticamente se o lead Ã© cliente pelo e-mail
- ğŸ“Š **Gerenciamento de Leads**: PÃ¡gina dedicada no admin para visualizar, buscar e gerenciar leads
- ğŸ”„ **Agrupamento Inteligente**: Contatos duplicados sÃ£o agrupados com contador de quantas vezes entraram em contato
- ğŸ“¥ **ExportaÃ§Ã£o de Dados**: Exporte leads em CSV ou Excel com formataÃ§Ã£o profissional
- ğŸ¯ **Busca e PaginaÃ§Ã£o**: Sistema completo de busca e paginaÃ§Ã£o para grandes volumes de dados
- ğŸš€ **Performance**: OtimizaÃ§Ãµes de cÃ³digo e limpeza de buffers para exportaÃ§Ã£o limpa
- ğŸ§¹ **Clean Code**: CÃ³digo limpo, organizado e pronto para produÃ§Ã£o

### VersÃ£o 1.0.2 - 11-11-2025
- ğŸ¯ **Suporte para seletor de quantidade no loop/catÃ¡logo**: IntegraÃ§Ã£o completa com tema Woodmart
- ğŸ”„ **SincronizaÃ§Ã£o automÃ¡tica**: Quantidade selecionada Ã© incluÃ­da automaticamente na mensagem do WhatsApp
- ğŸ“Š **Monitoramento inteligente**: Detecta mudanÃ§as em botÃµes +/-, digitaÃ§Ã£o direta e perda de foco
- ğŸ¨ **Estilos otimizados**: CSS especÃ­fico para melhor integraÃ§Ã£o visual com Woodmart
- âš¡ **Suporte AJAX**: Funciona com carregamento dinÃ¢mico de produtos
- ğŸ“± **Totalmente responsivo**: Funciona perfeitamente em mobile e desktop
- ğŸ­ **AnimaÃ§Ã£o no hover**: Efeito suave de elevaÃ§Ã£o ao passar o mouse no botÃ£o WhatsApp

### VersÃ£o 1.0.1 - 30-10-2025
- ğŸ”§ Mensagens do botÃ£o flutuante separadas por contexto:
  - Nova: "Mensagem do BotÃ£o Flutuante (pÃ¡ginas de produto)" com suporte a `{product_name}`
  - Mantida: "Mensagem do BotÃ£o Flutuante" para pÃ¡ginas comuns
- ğŸ§  SubstituiÃ§Ã£o automÃ¡tica de `{product_name}` nas pÃ¡ginas de produto (botÃ£o flutuante e widget de mÃºltiplos usuÃ¡rios)
- ğŸ”— InclusÃ£o opcional do link do produto nas mensagens do botÃ£o flutuante em pÃ¡ginas de produto, respeitando "Incluir na Mensagem > Link do produto"
- âœ‚ï¸ Uso de shortlink do WordPress (`wp_get_shortlink`) quando disponÃ­vel; fallback para permalink

### VersÃ£o 1.0.0 - 28-10-2025
- ğŸ‰ **LanÃ§amento inicial** com funcionalidades completas
- âœ¨ **Sistema de posicionamento avanÃ§ado** com ajuste fino
- ğŸ­ **Dois estilos de botÃ£o** (retangular e circular)
- â° **Sistema de horÃ¡rios diferenciados** por dia da semana
- ğŸ‘¥ **Sistema de mÃºltiplos usuÃ¡rios** com status automÃ¡tico
- ğŸ›’ **IntegraÃ§Ã£o completa com WooCommerce** (opcional)
- ğŸ¨ **Design responsivo** e interface moderna
- ğŸ”’ **SeguranÃ§a completa** e cÃ³digo limpo

---

**Desenvolvido com â¤ï¸ por David William da Costa**

*Plugin profissional para integraÃ§Ã£o WhatsApp com WordPress/WooCommerce*